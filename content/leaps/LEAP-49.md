---
leap: 49
title: Trading Rewards 2.0
status: Proposed
author: dappbeast, Sean Dawson
created: 2023-2-9
---

## Simple Summary

Two new tokenomics programs to reward traders and integrations for generating protocol fees.

## Abstract

This LEAP proposes two new programs for traders and integrations:

1. Trading Rewards Program: Traders earn from a pool of rewards proportional to their fees generated over an epoch. Traders also earn rewards for referring other traders.
2. Integration Rebate Program: A fee rebate program that rebates allowlisted integrations a percentage of fees generated. Integrations are typically public goods such as frontends and protocols.

This LEAP also proposes discontinuing existing trading programs:

1. [LEAP 34](https://leaps.lyra.finance/leaps/leap-34/): The tiered fee rebate program will be repurposed into the integration rebate program for allowlisted partners only. Individual taders will continue to earn in the new trading rewards program.
2. [LEAP 30](https://leaps.lyra.finance/leaps/leap-30): The short collateral rewards program will be discontinued. Shorters will continue to earn in the new trading rewards program.

## Motivation

1. Existing programs don't incentivize growth of the protocol's trader base and volumes:
   - Fee rebates are rewarded in a volatile asset (LYRA or OP tokens) instead of the quote asset, meaning traders cannot lock in a rebate's value until the end of each epoch up to 2 weeks after the initial trade. This is atypical for a fee rebate program which reduces its effectiveness.
   - Fee rebate tiers reward incumbent LYRA holders and traders, but do not reward new traders for trying the protocol.
   - The short collateral program is difficult to understand and communicate due to its unpredictable rates impacted by option deltas.
2. The new trading rewards program introduces new growth functions:
   - Increases total available rewards, solving the fee rebate program's cold start problem.
   - A referral incentive rewards traders for referring traders, building strong network effects into the tokenomics.
3. The repurposed integration rebate program allows integrators to continue to earn a steady stream of rewards:
   - Incentivises long-term alignment between the Lyra Protocol and its integrations with the LYRA token.
   - Separates integrations from competition between individual traders, providing a more consistent and predictable flow of rewards.

## Specification

### Trading Rewards

Traders earn points for each open position they hold. Traders earn more points when they:

- Pay more fees relative to premiums.
- Open shorter dated positions. This frees up more liquidity to keep pool utilization low.
- Hold a position until expiry. This punishes malicious users who repeatedly open and close positions to generate fees.
- Refer traders.

#### Base Points

Let:

- \$F\$ be the amount of fees in a trade
- \$P\$ be the premium of the trade
- \$T\$ be the time to expiry of the trade

Define the fee scaler $F_{scale}$ as

\( F\_{scale}=1+\sqrt{\frac{F}{P}} \)

Define the time score $T_{score}$ as

\( T\_{score}=\max(1-\frac{T\text{ days}}{\text{ epoch Length}}, 0.2) \)

A userâ€™s total score $S$ is defined as

\( S=F\times F*{scale}\times T*{score} \)

A user receives all $S$ points if they hold the position to expiry. They are paid out at a rate of

\( Y=\frac{X}{T\text{ in hours}} \)

points per hour.

Whenever a user updates their position, the total total number of points the user receives is the time weighted average of the two rates based on previous position's time open and the new position's time to expiry.

Suppose all \$N\$ users have scores \$(Y_1,Y_2,\dots, Y_N)\$. A user will be ranked according to their log score, i.e. \$\ln(Y_i)\$.

#### Referrals

Traders will earn additional points for referring other traders:

- A referrer earns 10% of the points generated by their referred traders.
- A referred trader earns an extra 10% points.

#### Implementation

- Points will be calculated in an off-chain script and mapped to rewards after each epoch.
- Referrals will be tracked off-chain via [Spindl](https://www.spindl.xyz/), a third party attribution tool. Referrals will only be tracked via frontends from allowlisted partners who integrate with Spindl. Attribution will be simple address mappings and no PII will be collected. Referral rewards will be distributed in Spindl's distributor contract after each epoch.
- Reward quantities and the referral attribution window will be set by Council pre [LEAP 51](https://leaps.lyra.finance/leaps/leap-51/) and by off-chain Snapshot vote post [LEAP 51](https://leaps.lyra.finance/leaps/leap-51/).

### Integration Rebates

Integrations will earn a fee rebate tiered by their stkLYRA balance, with the same functionality and implementation of [LEAP 34](https://leaps.lyra.finance/leaps/leap-34/). The number of tiers and rebate size will be reduced to establish a more sustainable program:

| stkLYRA Balance | Rebate |
| --------------- | ------ |
| 500,000         | 35%    |
| 1,000,000       | 50%    |
| 10,000,000      | 60%    |

Integrations must be allowlisted to earn rebates. The allowlist process from [LEAP 39](https://leaps.lyra.finance/leaps/leap-39) will be adopted, allowing integrations to delegate stkLYRA and payout addresses. Post [LEAP 51](https://leaps.lyra.finance/leaps/leap-51/) the Grants Council will be responsible for approving new integrations.

The integration allowlist will be maintained publicly in this [spreadsheet](https://docs.google.com/spreadsheets/d/1lerDJEghSfdutnvqzyLmY2QrLN7T2lBa2sj-eY2DDnE/edit#gid=0) and will be initialized with the existing [LEAP 39](https://leaps.lyra.finance/leaps/leap-39) allowlist.

#### Implementation

- Integration fees will be tracked on-chain via the `referrer` parameter in `OptionMarket` trade functions.
- Fees generated by each referral address will be calculated in an off-chain script and mapped to rewards after each epoch.

## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
